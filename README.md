> [!NOTE]
> This is really just something I made for myself to help document component libraries, so it probably has a lot of limitations and quirks since I've only accounted for how I use it. But maybe it's useful for you - if so - please feel free to make issues and pull requests ðŸ˜Š

# v-mark-docs

`v-mark-docs` uses [markdown-it](https://github.com/markdown-it/markdown-it) and [@mdit-vue/plugin-sfc](https://github.com/mdit-vue/mdit-vue/tree/main/packages/plugin-sfc) to turn markdown files into [**Vue** components](https://vuejs.org/guide/scaling-up/sfc.html) and custom `docs` blocks written in markdown into HTML.

## Quick start

### Install

```
npm i v-mark-docs
```

### Add to `vite.config.ts`

```ts
import { defineConfig } from "vite";

import vue from "@vitejs/plugin-vue";
import docs from "v-mark-docs;

export default defineConfig({
  // Allow import of `.md` files as SFC
  vue({ include: [/\.vue$/, /\.md$/] }),
  docs(),
})
```

### Add types for `.md` imports in `tsconfig.json`

```json
{
  "compilerOptions": {
    "types": ["v-mark-docs/types"]
  }
}
```

## Options

```ts
export interface MarkdownDocumentationPluginOptions {
  /**
   * The glob for files to include in
   * router export.
   *
   * The router import will return an empty array if this is not set.
   */
  include?: string;

  /**
   * If the docs for a component should
   * be made available on it under `Component.__docs`.
   */
  exposeDocs?: boolean;

  /**
   * Additional markdown-it setup.
   */
  setup?: PluginSimple;

  /**
   * The highlight option for `markdown-it`.
   */
  highlight?: (md: MarkdownIt, code: string, lang: string, attrs: string) => string;

  /**
   * The options for `markdown-it-vue-meta`.
   */
  meta?: PluginOptions;
}
```

### Plugins

You can customize the markdown-it instance using the `setup` and `highlight` options - but there are some plugins added by default:

- [markdown-it-mark](https://github.com/markdown-it/markdown-it-mark)
- [markdown-it-attrs](https://github.com/arve0/markdown-it-attrs)
- [markdown-it-anchor](https://github.com/valeriangalliat/markdown-it-anchor?tab=readme-ov-file#header-link)

### Frontmatter

You can acccess frontmatter data using the `$frontmatter` variable.

Other markdown-it packages do not have access to this variable - so for example if using a `$frontmatter` variable inside a title - you should specify the id for the title so that [markdown-it-anchor](https://github.com/valeriangalliat/markdown-it-anchor) doesn't end up with weird looking links - and [markdown-it-attrs](https://github.com/arve0/markdown-it-attrs) does not have access to the variables either.

```md
---
title: "Title"
description: "Description"
---

# {{ $frontmatter.title }} {#title}

{{ $frontmatter.description }}
```

### Routes

You can import an array of all markdown files - their absolute paths and their front matter. _Which files should be included can be modified using the `include` option._

```ts
import { routes } from "v-mark-docs:routes";

/**
 * @example result
 *
 * [{
 *   path: "/home/YourUsername/Documents/project/docs/Example.md",
 *   frontMatter: {}
 * }]
 */
```

#### vue-router

Assuming every markdown has a slug and a title in it's frontmatter - you could do something like this to create routes for the different documentation files:

```ts
routes.map((route) => ({
  path: route.frontMatter!.slug,
  name: route.frontMatter!.title.toLowerCase().replaceAll(" ", "-"),
  component: () => import(/* @vite-ignore */ route.absolutePath),
}));
```

#### `markdown-it-vue-meta`

If you add the `meta` option the plugin [markdown-it-vue-meta](https://github.com/sq11y/markdown-it-vue-meta) will be added. This adds the ability to document components using metadata generated by [vue-component-meta](https://www.npmjs.com/package/vue-component-meta) with the syntax `[?<title>]: <relative-path>.vue`.

## Run the example

```
// Build v-mark-docs
npm run build

// Move into example folder
cd example

// Run the project
npm run dev
```
